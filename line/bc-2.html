<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
<title>恋爱消费保</title>
<meta name="renderer" content="webkit">
<meta name="screen-orientation" content="portrait">
<meta name="x5-orientation" content="portrait">
<meta name="format-detection" content="telephone=no,email=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="恋爱消费保">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<script type="application/javascript" src="../js/fastclick.js"></script> 
<script type="application/javascript">
	function setFontSize(){
        document.documentElement.style.fontSize=window.innerWidth/16+'px';
    }
    setFontSize();
    window.addEventListener('resize',function(){
        setFontSize();
    });
    window.addEventListener('load', function () {
		FastClick.attach(document.body);
	}, false);
</script>
<link rel="stylesheet" href="../css/weui.min.px.css">
<link rel="stylesheet" href="../css/jin-bang-ti-ming-3.css">
</head>

<body ontouchstart="">
<div class="bc-2">
	<section class="model-message glb-text-center glb-border-top glb-border-bottom">
		<div class="model-mess-icon-shop"></div>
		<div class="model-mess-body">
			<p class="glb-para">北京甜蜜蜜婚纱摄影</p>
			<p class="glb-para-sm">确认保额</p>
			<p class="glb-title-sb glb-red number">100000.00元</p>
		</div>
		<div class="model-mess-footer"></div>    
	</section>
	<section class="bc2-select">
		<h2 class="bc2-title">选取收取对象</h2>
		<ul class="bc2-list glb-border-bottom">
			<li>
				<a class="bc2-item layout-tr" data-blz-show="#bc2-tanchuang">
					<img class="bc2-user-head" src="../images/bc2-user-head.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">飞到那天<span class="bc2-badge">我</span></div>
					<div class="model-pointer"></div>
				</a>	
			</li>
		</ul>
	</section>
	<section class="layout-tr glb-text-center model-btn-area">
		<div class="layout-td">
			<a href="javascript:void(0);" class="weui_btn weui_btn_primary">收&nbsp;&nbsp;取</a>
		</div>    
	</section>
</div>

<!--弹窗-->
<div class="glb-full-screen layout-tr" id="bc2-tanchuang" style="display: none;">
	<div class=" weui_mask" style="z-index:-1;" data-blz-dismiss="#bc2-tanchuang"></div>
	<section class="bc2-select">
		<h2 class="bc2-title glb-border-bottom">选取收取对象</h2>
		<ul class="bc2-list">
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">飞到那天<span class="bc2-badge">我</span></div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li class="glb-border-top">
				<a class="bc2-item layout-tr">
					<img class="bc2-user-head" src="../images/bc2-user-head-2.png" alt="飞到哪天" width="40" height="40">
					<div class="layout-td">包青天大人</div>
					<div class="model-pointer"></div>
				</a>	
			</li>
			<li id="bc2-loadmore" class="glb-border-top">
				<a class="bc2-loadmore" href="javascript:void(0);">加载更多</a>
			</li>
		</ul>
		<span class="bc2-tc-close" data-blz-dismiss="#bc2-tanchuang"></span>
	</section>
</div>
<script type="application/javascript" src="../js/jquery-3.1.0.js"></script>	
<script type="application/javascript" src="../js/jin-bang-ti-ming-3.js"></script>
<script>
	+function($){
    var load1=document.querySelector('#bc2-loadmore');
        link1=load1.querySelector('.bc2-loadmore'),
	    $ScrollElem=$('.bc2-list'),	
        elem=document.querySelector('tbody'),
        ajax=true,
        old=0,
        scrollDown=false,
        i=0;
    // 加载数据
    function ajaxContent(){
        link1.innerHTML='加载中<img style="width:1.2em;height:1.2em;vertical-align:middle;" class="loading" src="../images/loading.gif">';
        $.ajax({
            url:'../data/bc-2.json',
            type:'GET',
            success: function(data){
                var html='',
                    i=0,
                    j={};
                for(;i<data.length;i++){
                    j=data[i];
                    html+='<li class="glb-border-top">'+
								'<a href="javascript:void(0);" class="bc2-item layout-tr">'+
									'<img class="bc2-user-head" src="'+j.url+'" alt="'+j.name+'" width="40" height="40">'+
									'<div class="layout-td">'+j.name+'</div>'+
									'<div class="model-pointer"></div>'+
								'</a>'+
							'</li>';
                }
                $(html).insertBefore(load1);
                link1.innerHTML='加载更多';
                ajax=true;
            },
            error:function(){
                alert('请求错误');
                link1.innerHTML='加载更多';
                ajax=true;
            }
        });
    }
    
    // 滚动加载
    $ScrollElem.on('scroll',function(e){
        scrollDown=old<this.scrollTop?true:false;
        old=this.scrollTop;
        var top=load1.getBoundingClientRect().top,
			bottom=$ScrollElem[0].getBoundingClientRect().bottom;
        if(top-30<=bottom&&ajax&&scrollDown){
            ajax=false;
            ajaxContent();
        }
    });
    
    // 点击加载
    $(load1).on('click',function(){
        if(ajax){
            ajax=false;
            ajaxContent();
        }
    });
}(window.jQuery);
</script>	
</body>

</html>
