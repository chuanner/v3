<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
<title>恋爱消费保</title>
<meta name="renderer" content="webkit">
<meta name="screen-orientation" content="portrait">
<meta name="x5-orientation" content="portrait">
<meta name="format-detection" content="telephone=no,email=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="恋爱消费保">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<script type="application/javascript" src="../js/fastclick.js"></script> 
<script type="application/javascript">
	function setFontSize(){
        document.documentElement.style.fontSize=window.innerWidth/16+'px';
    }
    setFontSize();
    window.addEventListener('resize',function(){
        setFontSize();
    });
    window.addEventListener('load', function () {
		FastClick.attach(document.body);
	}, false);
</script>
<link rel="stylesheet" href="../css/weui.min.px.css">
<link rel="stylesheet" href="../css/jin-bang-ti-ming-3.css">
</head>

<body ontouchstart="" class="animation">
<div class="model-tab tyl-sq-sy">
    <div class="model-tab-nav classic glb-title">
        <div class="layout-tr">
            <div class="layout-td">
                <a href="#tab1" class="item active" data-blz-toggle="blz-tab">收取记录</a>
            </div>
            <div class="layout-td">
                <a href="#tab2" class="item" data-blz-toggle="blz-tab">使用记录</a>
            </div>
        </div>    
    </div>
    
    <div class="model-tab-content animation">
        
        <!--收取记录无任何记录或者使用记录无任何记录-->
        <p class="zbsj-none" id="tab2">暂无记录</p>
        
        <div id="tab1" class="glb-fade-out glb-fade-in">
			<section class="sqsy-summary glb-border-left glb-border-right">
				<div class="sqsy-summ-para">两年后与你的心上人的婚礼上<br>天安财产保险股份有限公司将送上现金</div>
				<p class="glb-title-sb glb-red sqsy-summ-number"><span id="total-price">0.00</span><small>元</small></p>
				<div class="layout-tr sqsy-summ-donation-understand">
					<a class="layout-td sqsy-summ-du-item" href="javascript:void(0);">了解恋爱消费保></a>
				</div>
			</section>
			<form>
				<section class="sqsy-consume glb-border-top">
					<ul>
						<li class="sqsy-consume-item-box glb-border-bottom">
							<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
								<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-green">线下消费</span><div class="glb-font-15">重庆小面望京店</div></div>
								<div class="glb-font-16"><span class="price">1000.00</span><small>元</small></div>
								<div class="model-pointer"></div>
							</a>
							<label class="model-checkbox-label layout-tr"><input class="model-checkbox" type="checkbox" data-type="single"></label>	
						</li>
						<li class="sqsy-consume-item-box glb-border-bottom">
							<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
								<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-red">天猫消费</span><div class="glb-font-15">重庆小面望京店</div></div>
								<div class="glb-font-16"><span class="price">1000.00</span><small>元</small></div>
								<div class="model-pointer"></div>
							</a>
							<label class="model-checkbox-label layout-tr"><input class="model-checkbox" type="checkbox" data-type="single"></label>	
						</li>
						<li class="sqsy-consume-item-box glb-border-bottom">
							<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
								<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-golden">好友转赠</span><div class="glb-font-15">重庆小面望京店</div></div>
								<div class="glb-font-16"><span class="price">1000.00</span><small>元</small></div>
								<div class="model-pointer"></div>
							</a>
							<label class="model-checkbox-label layout-tr"><input class="model-checkbox" type="checkbox" data-type="single"></label>	
						</li>
						<li class="sqsy-consume-item-box glb-border-bottom">
							<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
								<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-earth">好友转赠</span><div class="glb-font-15">重庆小面望京店</div></div>
								<div class="glb-font-16"><span class="price">1000.00</span><small>元</small></div>
								<div class="model-pointer"></div>
							</a>
							<label class="model-checkbox-label layout-tr"><input class="model-checkbox" type="checkbox" data-type="single"></label>	
						</li>
					</ul>
				</section>
				<section class="sqsy-activation glb-border-top layout-tr">
					<label class="model-checkbox-label layout-tr"><input id="total-checkbox" class="model-checkbox" type="checkbox" data-type="total"></label>
					<div class="layout-td">激活费用<span class="glb-green glb-font-14"><span id="active-cost" data-blz-mapped="0.5">0.00</span>元</span><div class="glb-red">已优惠<span id="discount" data-blz-mapped="0.1">0.00</span>元</div></div>
					<input type="submit" class="weui_btn weui_btn_primary" value="激活" disabled>
				</section>
			</form>
		</div>
   
   		<!--选项二-->
		<div id="tab2"  class="glb-fade-out">
			<section class="sqsy-consume used glb-border-top">
				<ul>
					<li class="sqsy-consume-item-box glb-border-bottom">
						<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
							<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-green">线下消费</span><div class="glb-font-15">重庆小面望京店</div></div>
							<div class="glb-font-16 sqsy-consu-used-price">1000.00<small>元</small></div>
							<div class="model-pointer"></div>
						</a>
					</li>
					<li class="sqsy-consume-item-box glb-border-bottom">
						<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
							<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-red">天猫消费</span><div class="glb-font-15">重庆小面望京店</div></div>
							<div class="glb-font-16 sqsy-consu-used-price">1000.00<small>元</small></div>
							<div class="model-pointer"></div>
						</a>	
					</li>
					<li class="sqsy-consume-item-box glb-border-bottom">
						<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
							<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-golden">好友转赠</span><div class="glb-font-15">重庆小面望京店</div></div>
							<div class="glb-font-16 sqsy-consu-used-price">1000.00<small>元</small></div>
							<div class="model-pointer"></div>
						</a>
					</li>
					<li class="sqsy-consume-item-box glb-border-bottom">
						<a class="layout-tr sqsy-consume-item" href="www.ebay.com">
							<div class="layout-td glb-text-of-2">2016-12-9<span class="sqsy-consu-badge-earth">好友转赠</span><div class="glb-font-15">重庆小面望京店</div></div>
							<div class="glb-font-16 sqsy-consu-used-price">1000.00<small>元</small></div>
							<div class="model-pointer"></div>
						</a>
					</li>
				</ul>
			</section>
		</div>
    </div>        
</div>
<div id="glb-share" class="glb-full-screen" style="display: none; background-color:rgba(0,0,0,0.6);" data-blz-dismiss="#glb-share">
	<img src="../images/glb-share.png" style="width:100%;">
</div>
</body>
<script type="application/javascript" src="../js/jquery-3.1.0.js"></script>
<script type="application/javascript" src="../js/jin-bang-ti-ming-3.js"></script>
<script type="application/javascript">
	+function($){
		'use strict';
		
		var $TotalElem=$('#total-price'),
			$ActiveCost=$('#active-cost'),
			$Discount=$('#discount');
		var count=0;
		var inputs=document.forms[0];
		
		// 每当商品被选中时更新显示的总价
		$(document.forms[0]).on('change','[data-type="single"]',function(event){
			var totalPrice=$TotalElem.text()-0;
			var price=$(this).closest('.sqsy-consume-item-box').find('.price').text()-0;
			var symbol=this.checked?1:-1;
			
			totalPrice=(totalPrice+symbol*price).toFixed(2);
			$TotalElem.text(totalPrice);
			$ActiveCost.text((totalPrice*$ActiveCost.data('blz-mapped')).toFixed(2));
			$Discount.text((totalPrice*$Discount.data('blz-mapped')).toFixed(2));
			if(symbol===-1){
				count--;
				document.getElementById('total-checkbox').checked=false;
			}else {
				count++;
			}
			if(count<=0){
				inputs[inputs.length-1].disabled=true;
			}else {
				inputs[inputs.length-1].disabled=false;
			}
			// 转换规则？

		}).on('change','[data-type="total"]',function(){
			var l=inputs.length,
				i=0;
			
			// 遍历待优化
			for(;i<l-2;i++){
				if(inputs[i].checked===this.checked){
					
				}else{
					inputs[i].checked=this.checked;
					$(inputs[i]).trigger('change');
				}
			};
		});
	}(window.jQuery);
</script>
</html>
